<%- include('../includes/head.ejs') %>
<link rel="stylesheet" href="/css/home.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>

<body>
     <div class="home-page-main-wrapper">
        <div class="home-page-main-container shadow-[0_4px_10px_rgba(0,0,0,0.2)]">
            <%- include('./donor-includes/donor-navigation.ejs') %>
            <div class="home-page-right-panel-wrapper border-t flex flex-col justify-center items-center border-slate-100">
                <div class="home-page-main-content-header w-full p-8 h-full flex flex-row justify-between"> 
                    <div class="flex flex-col justify-start items-start gap-2">
                        <div class="text-slate-800 text-4xl font-medium">Hi <%=donorDetails.name%>! Ready to make a difference today?</div>
                        <div class="text-slate-500 text-2xl">Save lives, one drop at a time. Welcome to our Blood Bank!</div>
                    </div>
                    <div class="text-red-500">
                       <div class="bg-red-200 shadow-md w-20 h-20 rounded-full flex flex-col justify-center items-center text-2xl font-semibold"><%=donorDetails.bloodGroup%></div>
                    </div>
                </div>
                <div class="home-page-main-content-body w-full h-full">
                    <div class="flex flex-col justify-start items-start p-8 gap-8 text-xl">
                        <% if(donorDetails.badges && Array.isArray(donorDetails.badges) && donorDetails.badges.length ){ %>
                            <div class="text-xl">
                                You are a <span class="text-red-500 text-2xl"><%= donorDetails.badges[donorDetails.badges.length-1]%>!</span>
                            </div>   
                        <% }%>
                        <div class="w-full flex flex-col gap-4 justify-center items-center">
                            <div class="text-slate-800 text-2xl w-full">Quick Summary</div>
                            <div class="flex flex-row justify-stretch items-center gap-8 w-full">
                                <div class="w-1/3 p-6 border border-slate-400 shadow-md flex flex-col gap-4 justify-center items-center rounded-lg">
                                    <div>Total Donations Count</div>
                                    <div class="text-slate-800 font-bold text-2xl"><%=donorDetails.donationCount%></div>
                                </div>
                                <div class="w-1/3 p-6 border border-slate-400 shadow-md flex flex-col gap-4 justify-center items-center rounded-lg">
                                    <div>Total Points Earned</div>
                                    <div class="text-slate-800 font-bold text-2xl"><%=donorDetails.points%></div>
                                </div>
                                <div class="w-1/3 p-6 border border-slate-400 shadow-md flex flex-col gap-4 justify-center items-center rounded-lg">
                                    <div>Last Donation Date</div>
                                    <div class="text-slate-800 font-bold text-2xl"><%=donorDetails.lastDonationDone ? donorDetails.lastDonationDone : "NA" %></div>
                                </div>
                            </div>
                        </div>
                         <% if(latestCampDetails != null) { %>
                            <div class="w-full flex flex-col gap-4 text-xl justify-center items-start mt-6 shadow-[0_4px_10px_rgba(0,0,0,0.2)] rounded-lg p-6">
                                <h2 class="text-xl font-semibold text-gray-700">Next Donation Camp Details</h2>
                                <div class="flex flex-col gap-4">
                                    <div class="flex flex-row gap-3 items-center">
                                        <i class="fas fa-ring"></i> Name: <%= latestCampDetails.name %>
                                    </div>
                                    <div class="flex flex-row gap-3 items-center">
                                        <i class="fas fa-map-marker-alt"></i> Location: <%= latestCampDetails.location %>
                                    </div>
                                    <div class="flex flex-row gap-3 items-center">
                                        <i class="fas fa-calendar-alt"></i> Date: <%= latestCampDetails.date %>
                                    </div>
                                    <div class="flex flex-row gap-3 items-center">
                                        <i class="fas fa-clock"></i> Time: 10AM to 5PM
                                    </div>
                                </div>
                                <div class="w-full flex flex-col gap-4 text-xl justify-center items-start">
                                    <div>Register now to secure your spot</div>
                                    <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                                    <button type="submit"  
                                        class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 focus:outline-none">
                                        <a href="/donor/register-to-camp">Register</a>
                                    </button>
                                </div>
                            </div>
                        <% } else { %>
                            <div class="w-full flex flex-col gap-4 text-xl justify-center items-start mt-6 shadow-[0_4px_10px_rgba(0,0,0,0.2)] rounded-lg p-6">
                                <h2 class="text-xl font-semibold text-gray-700">No donation camps scheduled yet!.</h2>
                            </div>
                        <%}%>
                    </div>
                </div>
                <%- include('./donor-includes/donor-footer.ejs') %>
            </div>         
<%- include('../includes/end.ejs') %>